name: ðŸš€ Deploy
on: [push]
env:
  FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}
jobs:
  deploy:
    name: ðŸš€ Deploy App
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        name: ðŸ”½ Checkout Repo

      - uses: superfly/flyctl-actions@1.3
        name: ðŸŽˆ Deploy to Fly
        with:
          args: 'deploy'

      - uses: treosh/lighthouse-ci-action@v9
        name: ðŸ§ª Lighthouse Tests
        with:
          temporaryPublicStorage: true
          urls: |
            https://www.alaycock.co.uk/
            https://www.alaycock.co.uk/about
            https://www.alaycock.co.uk/articles
            https://www.alaycock.co.uk/2022/03/windows-update-for-business
